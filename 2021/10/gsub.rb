PI=(22.0/7).to_s;$<.map{p while _1.gsub!(/\(\)|{}|\[\]|<>/,[]*PI);/\)|}|\]|>/=~_1 ?[{?)=>3,?]=>57,?}=>1197,?>=>25137}[$&]]:[0,_1.reverse.tr('{|(<[',PI).to_i(5)]}.tap{puts _1.map(&:first).inject(:+)}.map{_1[1]}.compact.tap{puts _1.sort[_1.length>>1]}
